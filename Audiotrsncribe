import sounddevice as sd
import numpy as np
import whisper

model = whisper.load_model("base")

def callback(indata, frames, time, status):
    if status:
        print(status)
    audio_data = np.frombuffer(indata, dtype=np.float32)
    result = model.transcribe(audio_data)
    print("Transcription:", result["text"])

with sd.InputStream(callback=callback, samplerate=16000, channels=1):
    print("Listening... Press Ctrl+C to stop")
    while True:
        try:
            pass  # Keeps the script running
        except KeyboardInterrupt:
            print("\nStopping transcription...")
            break
